<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Spring MVC数据校验与国际化 | 笨笨个人笔记</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/css/main.css?v=1.0.4"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body style="background:#fbfbfb;"><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Spring MVC数据校验与国际化</h1><a id="logo" href="/.">笨笨个人笔记</a><p class="description">ibenben.org</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Spring MVC数据校验与国际化</h1><div class="post-meta">Jul 1, 2015<span> | </span><span class="category"><a href="/categories/Spring-MVC/">Spring MVC</a><a href="/categories/Spring-MVC/Spring/">Spring</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h2 id="1、-JSR-303"><a href="#1、-JSR-303" class="headerlink" title="1、 JSR-303"></a>1、 JSR-303</h2><p>JSR-303 是JAVA EE 6 中的一项子规范，叫做Bean Validation，官方参考实现是Hibernate Validator。<br>此实现与Hibernate ORM 没有任何关系。JSR 303 用于对Java Bean 中的字段的值进行验证。</p>
<p>Spring MVC 3.x之中也大力支持 JSR-303，可以在控制器中对表单提交的数据方便地验证。</p>
<p>JSR 303内置的约束规则：</p>
<ul>
<li>@AssertTrue / @AssertFalse</li>
</ul>
<p>验证适用字段：boolean<br>注解说明：验证值是否为true / false<br>属性说明：-</p>
<ul>
<li>@DecimalMax / @DecimalMin</li>
</ul>
<p>验证适用字段：BigDecimal,BigInteger,String,byte,short,int,long<br>注解说明：验证值是否小于或者等于指定的小数值，要注意小数存在精度问题<br>属性说明：公共</p>
<ul>
<li>@Digits</li>
</ul>
<p>验证适用字段：BigDecimal,BigInteger,String,byte,short,int,long<br>注解说明：验证值的数字构成是否合法<br>属性说明：integer:指定整数部分的数字的位数。fraction: 指定小数部分的数字的位数。</p>
<ul>
<li>@Future / @Past</li>
</ul>
<p>验证适用字段：Date,Calendar<br>注解说明：验证值是否在当前时间之后 / 之前<br>属性说明：公共</p>
<ul>
<li>@Max / @Min</li>
</ul>
<p>验证适用字段：BigDecimal,BigInteger,String,byte,short,int,long<br>注解说明：验证值是否小于或者等于指定的整数值<br>属性说明：公共</p>
<ul>
<li>@NotNull / @Null</li>
</ul>
<p>验证适用字段：引用数据类型<br>注解说明：验证值是否为非空 / 空<br>属性说明：公共</p>
<ul>
<li>@Pattern</li>
</ul>
<p>验证适用字段：String<br>注解说明：验证值是否配备正则表达式<br>属性说明：regexp:正则表达式flags: 指定Pattern.Flag 的数组，表示正则表达式的相关选项。</p>
<ul>
<li>@Size</li>
</ul>
<p>验证适用字段：String,Collection,Map,数组<br>注解说明：验证值是否满足长度要求<br>属性说明：max:指定最大长度，min:指定最小长度。</p>
<ul>
<li>@Valid</li>
</ul>
<p>验证适用字段：引用类型<br>注解说明：验证值是否需要递归验证<br>属性说明：无</p>
<p>使用Spring MVC 和 JSR-303的标注做表单提交的服务器端验证时，@Valid 标注的Command对象和BindingResult参数一定要紧挨着。要不然数据绑定错误直接抛异常，不会封装成一个BindingResult对象。</p>
<h2 id="2、Spring-MVC数据校验"><a href="#2、Spring-MVC数据校验" class="headerlink" title="2、Spring MVC数据校验"></a>2、Spring MVC数据校验</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven/&gt;会默认装配好一个LocalValidatorFactoryBean,通过在处理方法的入参上标注@Valid注解就可让Spring MVC在完成数据绑定后执行数据校验操作。</span><br></pre></td></tr></table></figure>
<p>A、需要的额外的JAR包<br>除了Spring MVC本身的JAR包外，我们还需要一些额外的JAR包。<br><img src="/img/article/20150701140815258.png" alt="这里写图片描述"></p>
<p>B、添加JSR 303注解<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">package cn.framelife.mvc.entity;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">import javax.validation.constraints.DecimalMax;</span><br><span class="line">import javax.validation.constraints.DecimalMin;</span><br><span class="line">import javax.validation.constraints.NotNull;</span><br><span class="line">import javax.validation.constraints.Past;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import javax.validation.constraints.Size;</span><br><span class="line"></span><br><span class="line">import org.springframework.format.annotation.DateTimeFormat;</span><br><span class="line">import org.springframework.format.annotation.NumberFormat;</span><br><span class="line"></span><br><span class="line">public class User implements java.io.Serializable &#123;</span><br><span class="line"></span><br><span class="line">    private Integer id;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">     * 测试的时候，发现在页面获取到的数据传到User模式后，都是非空的。</span><br><span class="line">     */</span><br><span class="line">    @NotNull(message = &quot;用户名不能为空&quot;)</span><br><span class="line">    private String username;</span><br><span class="line"></span><br><span class="line">    @Size(min = 2, max = 6, message = &quot;长度是2-6之间&quot;)</span><br><span class="line">    private String password;</span><br><span class="line"></span><br><span class="line">    @Past(message = &quot;必须是一个过去的时间&quot;)</span><br><span class="line">    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span><br><span class="line">    private Date birthday;</span><br><span class="line"></span><br><span class="line">    @DecimalMin(value = &quot;1000.00&quot;, message = &quot;工资必须大于1000.00&quot;)</span><br><span class="line">    @DecimalMax(value = &quot;10000.00&quot;, message = &quot;工资必须小于10000.00&quot;)</span><br><span class="line">    @NumberFormat(pattern = &quot;#,###.##&quot;)</span><br><span class="line">    private long salary;</span><br><span class="line"></span><br><span class="line">    @Pattern(regexp = &quot;1[3|4|5|8][0-9]\\d&#123;4,8&#125;&quot;, message = &quot;手机号码不匹配&quot;)</span><br><span class="line">    private String phone;</span><br><span class="line"></span><br><span class="line">    public String getPhone() &#123;</span><br><span class="line">        return phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPhone(String phone) &#123;</span><br><span class="line">        this.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public long getSalary() &#123;</span><br><span class="line">        return salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSalary(long salary) &#123;</span><br><span class="line">        this.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Date getBirthday() &#123;</span><br><span class="line">        return birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBirthday(Date birthday) &#123;</span><br><span class="line">        this.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Integer getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Integer id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>C、Controller中的处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/user&quot;)</span><br><span class="line">public class UserControl &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 此方法是用于第一次给页面添加一个user模型数据的</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(value=&quot;/add&quot;,method = RequestMethod.GET)</span><br><span class="line">    public ModelAndView initForm()&#123;</span><br><span class="line">        User user = new User();</span><br><span class="line">        return new ModelAndView(&quot;/add&quot;).addObject(user); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 给入参的模型对象User加入@Valid注解，说明这个对象里面的属性需要校验</span><br><span class="line">     * BindingResult入参是用以判断上面的校验是否出错</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(&quot;create&quot;)</span><br><span class="line">    public ModelAndView createUser(@Valid User user,BindingResult bindingResult)&#123;</span><br><span class="line">        ModelAndView view = new ModelAndView();</span><br><span class="line">        System.out.println(user.getUsername()+&quot;----&quot;);</span><br><span class="line"></span><br><span class="line">        //如果校验有问题，跑回原来的add.jsp页面，如果没问题跑到success.jsp页面</span><br><span class="line">        if(bindingResult.hasErrors())&#123;</span><br><span class="line">            view.setViewName(&quot;/add&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            view.setViewName(&quot;/success&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>D、页面输入及输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!-- 导入spring的表单标签库 --&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+&quot;://&quot;+request.getServerName()+&quot;:&quot;+request.getServerPort()+path+&quot;/&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;增加&lt;/title&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;    </span><br><span class="line">    &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 在使用表单标签的时候需要获取到一个user模型数据，那我们不能直接访问页面（通过/user/add.abc访问），必须通过访问一次服务器，获取到一个user数据模型后才行，否则会出错 --&gt;</span><br><span class="line">    &lt;form:form modelAttribute=&quot;user&quot; action=&quot;user/create.abc&quot;&gt;</span><br><span class="line">        &lt;!-- 输出所有的错误信息 --&gt;</span><br><span class="line">        &lt;form:errors path=&quot;*&quot; /&gt;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 输出单个错误信息 --&gt;</span><br><span class="line">        &lt;form:errors path=&quot;username&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        用户名：&lt;form:input path=&quot;username&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;password&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        密 码:&lt;form:password path=&quot;password&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;birthday&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        生日：&lt;form:input path=&quot;birthday&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;salary&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        工资：&lt;form:input path=&quot;salary&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;phone&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        电话：&lt;form:input path=&quot;phone&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">    &lt;/form:form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="3、通过国际化资源显示错误信息"><a href="#3、通过国际化资源显示错误信息" class="headerlink" title="3、通过国际化资源显示错误信息"></a>3、通过国际化资源显示错误信息</h2><p>A、校验属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 使用资源文件，这里不再需要message参数</span><br><span class="line"> */</span><br><span class="line">@Pattern(regexp = &quot;1[3|4|5|8][0-9]\\d&#123;4,8&#125;&quot;)</span><br><span class="line">private String phone;</span><br></pre></td></tr></table></figure></p>
<p>B、资源文件（src下的messages.properties）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pattern.user.phone=\u624B\u673A\u53F7\u7801\u4E0D\u5339\u914D</span><br></pre></td></tr></table></figure></p>
<p>上面键值对中，<br>键是校验类javax.validation.constraints.Pattern的类名+被校验的模型对象名+属性名<br>值是”手机号码不匹配”</p>
<p>C、配置本地化资源文件（mvc-servlet.xml）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置国际化资源文件 --&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">        ReloadableResourceBundleMessageSource加载时,默认使用DefaultResourceLoader,他会先判断资源path是否带有classpath:前缀,如果有,用ClassPathResource去加载资源文件,如果没有试着用文件协议的url去访问,再没有就在contextPath即WEB-INF下查找</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;bean id=&quot;messageSource&quot;</span><br><span class="line">        class=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;</span><br><span class="line">        p:basename=&quot;classpath:messages&quot;&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>D、显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!-- 导入spring的表单标签库 --&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+&quot;://&quot;+request.getServerName()+&quot;:&quot;+request.getServerPort()+path+&quot;/&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;增加&lt;/title&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;    </span><br><span class="line">    &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 在使用表单标签的时候需要获取到一个user模型数据，那我们不能直接访问页面（通过/user/add.abc访问），必须通过访问一次服务器，获取到一个user数据模型后才行，否则会出错 --&gt;</span><br><span class="line">    &lt;form:form modelAttribute=&quot;user&quot; action=&quot;user/create.abc&quot;&gt;</span><br><span class="line">        &lt;!-- 输出所有的错误信息 --&gt;</span><br><span class="line">        &lt;form:errors path=&quot;*&quot; /&gt;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 输出单个错误信息 --&gt;</span><br><span class="line">        &lt;form:errors path=&quot;username&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        用户名：&lt;form:input path=&quot;username&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;password&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        密 码:&lt;form:password path=&quot;password&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;birthday&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        生日：&lt;form:input path=&quot;birthday&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;salary&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        工资：&lt;form:input path=&quot;salary&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form:errors path=&quot;phone&quot; &gt;&lt;/form:errors&gt;&lt;br/&gt;</span><br><span class="line">        电话：&lt;form:input path=&quot;phone&quot;/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">    &lt;/form:form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/hibernate/">hibernate</a><a href="/tags/spring-mvc/">spring-mvc</a><a href="/tags/数据校验/">数据校验</a><a href="/tags/国际化/">国际化</a><a href="/tags/字段/">字段</a></div><div class="post-nav"><a href="/2015/07/01/46709715/" class="pre">Spring MVC文件上传</a><a href="/2015/07/01/46709543/" class="next">Spring MVC数据转换</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2013-2018 <a href="/." rel="nofollow">笨笨个人笔记.</a></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=1.0.4" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.4" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.4"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.4"></script><script type="text/javascript" src="/js/prism.js?v=1.0.4"></script></div></body></html>